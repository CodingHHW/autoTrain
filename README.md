# 视频处理与模型训练集成软件

## 软件简介

本软件是一款基于PyQt5开发的跨平台视频处理与YOLO模型训练集成工具，支持Windows、Ubuntu和macOS三大主流操作系统。软件集成了视频录制、图像提取、数据标注、数据集切分和YOLO模型训练等功能，为计算机视觉模型开发提供了完整的工作流支持。

## 功能模块

### 1. 视频录制模块
- 调用系统默认相机进行视频录制
- 支持实时视频预览
- 可配置帧率（1-60fps）
- 支持视频保存路径自定义
- 提供录制控制（开始/暂停/停止）
- 生成MP4格式视频文件

### 2. 图像提取模块
- 支持从视频文件中提取图像
- 可指定图像保存路径
- 支持输入需要提取的图像张数
- 实现随机抽取视频帧功能
- 显示提取进度和完成提示
- 生成JPG格式图像文件

### 3. 数据标注模块
- 集成labelImg工具进行数据标注
- 支持图像文件夹和标签保存路径配置
- 与主程序无缝交互
- 支持标注结果保存与管理

### 4. 数据集切分模块
- 支持按比例划分训练集、验证集和测试集
- 可自定义划分比例（三部分之和为100%）
- 支持输出目录自定义
- 自动生成标准数据结构
- 生成数据集划分报告

### 5. YOLO训练模块
- 支持YOLO模型训练
- 可配置训练参数：
  - 批处理大小（Batch Size）
  - 迭代次数（Epochs）
  - 学习率（Learning Rate）
  - 模型配置文件
  - 预训练权重
- 支持训练过程监控
- 提供训练进度和关键指标显示
- 支持训练过程控制（开始/停止）

## 环境配置

### 1. 系统要求
- Windows 10/11
- Ubuntu 20.04+  
- macOS 10.15+

### 2. 依赖库安装

#### 方法一：使用requirements.txt安装

```bash
# 激活虚拟环境
source autoLabelImg/bin/activate  # Linux/macOS
autoLabelImg\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt
```

#### 方法二：手动安装

```bash
# 安装PyQt5
pip install PyQt5==5.15.9 PyQt5-Qt5==5.15.2 PyQt5-sip==12.12.2

# 安装OpenCV
pip install opencv-python==4.8.1.78

# 安装numpy
pip install numpy==1.25.2

# 安装YOLO库
pip install ultralytics==8.0.220

# 安装其他依赖
pip install matplotlib==3.8.0 pillow==10.1.0 pyyaml==6.0.1 loguru==0.7.2
```

## 软件运行

### 1. 启动软件

```bash
# 激活虚拟环境
source autoLabelImg/bin/activate  # Linux/macOS
autoLabelImg\Scripts\activate  # Windows

# 运行软件
python src/main.py
```

### 2. 界面布局

软件采用左侧工具栏、右侧视频显示区域的布局结构：

- **左侧工具栏**：包含所有功能模块按钮，按功能流程顺序排列
- **右侧视频显示区域**：用于实时视频预览和视频帧显示
- **底部状态区域**：显示操作状态和日志信息

## 使用说明

### 1. 视频录制

1. 在左侧"视频录制"模块中，设置录制参数：
   - 调整帧率（默认25fps）
   - 选择视频保存路径
2. 点击"录制视频"按钮开始录制
3. 可点击"暂停"/"继续"按钮控制录制过程
4. 点击"停止"按钮结束录制

### 2. 图像提取

1. 在左侧"图像提取"模块中：
   - 点击"浏览"选择视频文件
   - 选择图像保存路径
   - 设置需要提取的图像张数
2. 点击"提取图像"按钮开始提取
3. 观察进度条和状态信息
4. 提取完成后会弹出提示

### 3. 数据标注

1. 在左侧"数据标注"模块中：
   - 选择图像文件夹（包含需要标注的图像）
   - 选择标签保存路径
2. 点击"数据标注"按钮启动labelImg工具
3. 在labelImg中进行标注操作：
   - 打开图像文件
   - 创建标注框
   - 添加类别标签
   - 保存标注结果
4. 标注完成后关闭labelImg窗口

### 4. 数据集切分

1. 在左侧"数据集切分"模块中：
   - 选择图像文件夹（包含标注好的图像）
   - 选择标签文件夹（包含标注文件）
   - 选择输出目录
   - 设置训练集、验证集、测试集的划分比例（之和为100%）
2. 点击"数据集切分"按钮开始划分
3. 观察进度条和状态信息
4. 划分完成后会弹出报告

### 5. YOLO训练

1. 准备YOLO训练所需文件：
   - 数据配置文件（data.yaml）
   - 模型配置文件（如yolov8n.yaml）
   - 预训练权重（可选，如yolov8n.pt）
2. 在左侧"YOLO训练"模块中：
   - 选择数据配置文件
   - 选择模型配置文件
   - 选择预训练权重
   - 设置训练参数：迭代次数、批处理大小、学习率
3. 点击"开始训练"按钮启动训练
4. 观察状态信息查看训练进度
5. 点击"停止训练"按钮可终止训练

## 项目结构

```
autoTrain/
├── src/                  # 源代码目录
│   └── main.py           # 主程序文件
├── modules/              # 功能模块目录（预留）
├── resources/            # 资源文件目录（预留）
├── config/               # 配置文件目录（预留）
├── logs/                 # 日志文件目录
├── requirements.txt      # 依赖库列表
└── README.md             # 项目说明文档
```

## 常见问题解决

### 1. 无法启动软件

**问题**：运行`python src/main.py`后无反应或报错

**解决方法**：
- 检查虚拟环境是否正确激活
- 检查依赖库是否全部安装
- 查看logs/app.log日志文件获取详细错误信息

### 2. 无法打开摄像头

**问题**：点击"录制视频"后，视频显示区域无画面

**解决方法**：
- 检查摄像头是否被其他程序占用
- 检查系统权限设置，确保软件可以访问摄像头
- 尝试重启计算机

### 3. labelImg无法启动

**问题**：点击"数据标注"后，labelImg窗口无法打开

**解决方法**：
- 检查labelImg是否已正确安装在虚拟环境中
- 手动运行`labelImg`命令测试
- 重新安装labelImg：`pip install labelImg`

### 4. YOLO训练失败

**问题**：点击"开始训练"后，训练过程报错

**解决方法**：
- 检查数据配置文件（data.yaml）格式是否正确
- 检查数据集路径是否正确
- 检查模型配置文件是否存在
- 降低批处理大小，减少内存占用

## 技术支持

如遇其他问题，请查看日志文件`logs/app.log`获取详细错误信息，或联系技术支持。

## 版本更新

### v1.0.0
- 初始版本发布
- 集成视频录制、图像提取、数据标注、数据集切分和YOLO训练功能
- 支持Windows、Ubuntu和macOS操作系统

## 许可证

本软件采用MIT许可证，详见LICENSE文件。
